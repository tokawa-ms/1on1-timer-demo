# 1 on 1 タイマーアプリケーション

Azure Speech Service の Speaker Diarization（話者分離）機能を使用して、1 on 1 ミーティングにおけるマネージャーと部下の発話時間を計測・可視化するアプリケーションです。

## 📋 概要

このアプリケーションは、1 on 1 ミーティングの質を向上させるために、マネージャーと部下の発話時間のバランスを可視化し、適切なフィードバックを提供します。

### 主な機能

- 🎤 **リアルタイム音声認識**: Azure Speech Service による高精度な音声認識
- 👥 **話者分離**: Speaker Diarization 機能で複数の話者を自動識別
- 📊 **発話時間可視化**: グラフで発話時間の比率を表示
- 💡 **リアルタイムアドバイス**: マネージャーの発話比率に応じたフィードバック
- 💬 **会話履歴**: チャット形式で会話内容を記録・表示

## 🚀 クイックスタート

### 前提条件

1. **Azure Speech Service リソース**
   - Azure Portal で Speech Service リソースを作成
   - リージョンとサブスクリプションキーを取得

2. **ブラウザー**
   - Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
   - マイクへのアクセス許可が必要

### 使用方法

1. **アプリケーションを開く**
   ```bash
   # ブラウザーで以下のファイルを開く
   src/index.html
   ```

2. **Azure Speech Service に接続**
   - リージョン（例: japaneast）を入力
   - サブスクリプションキーを入力
   - 「接続テスト & 保存」をクリック

3. **録音開始**
   - 「録音開始」ボタンをクリック
   - マイクへのアクセスを許可
   - 1 on 1 ミーティングを開始

4. **話者を選択**
   - 検出された話者の中から、マネージャーに該当する話者を選択

5. **結果を確認**
   - 発話時間比率グラフ
   - アドバイス
   - 会話履歴

## 📱 画面構成

### 画面上部：接続設定
- Azure Speech Service のリージョン入力
- サブスクリプションキー入力
- 接続テスト & 保存ボタン

### 画面左側：統計情報
- 録音コントロール（開始/停止）
- 話者選択（マネージャーの指定）
- 発話時間比率グラフ
- アドバイス表示

### 画面右側：会話履歴
- チャット形式の会話表示
- マネージャーと部下の色分け
- 発話時刻の表示

## 🛠️ 技術スタック

### フロントエンド
- HTML5
- CSS3 with Tailwind CSS
- JavaScript ES6

### 外部ライブラリ（CDN）
- Azure Cognitive Services Speech SDK
- Chart.js 4.4.0
- Tailwind CSS 3.x

## 📊 アドバイスロジック

アプリケーションは、マネージャーの発話比率に基づいて以下のアドバイスを提供します：

| マネージャー発話比率 | アドバイス |
|---------------------|-----------|
| 70%超 | ⚠️ マネージャーの発話時間が多すぎます。もっと部下の話を聞くようにしましょう。 |
| 30%未満 | 💡 マネージャーの発話時間が少なすぎます。もっといろいろな話をして部下をサポートしましょう。 |
| 30%〜70% | ✅ 良いバランスです！このまま対話を続けましょう。 |

## 🔒 セキュリティに関する注意

このアプリケーションは技術デモ用のサンプルです。

- **APIキーの取り扱い**: UI入力フィールドから設定し、ローカルストレージに保存
- **本番環境での使用**: バックエンドAPIを経由してAPIキーを管理することを推奨

## 📁 ディレクトリ構成

```
1on1-timer-demo/
├── src/
│   ├── index.html          # メインHTML
│   ├── css/
│   │   └── styles.css      # カスタムCSS
│   ├── js/
│   │   └── script.js       # メインJavaScript
│   └── assets/
│       └── images/         # 画像ファイル
├── docs/
│   └── specification.md    # 詳細仕様書
└── README.md               # このファイル
```

## 📖 ドキュメント

- [詳細仕様書](docs/specification.md) - 技術仕様と機能の詳細

## 🐛 トラブルシューティング

### マイクにアクセスできない
- ブラウザーの設定でマイクへのアクセスを許可してください
- HTTPS または localhost からアクセスしていることを確認してください

### 音声認識が動作しない
- Azure Speech Service の接続設定を確認してください
- リージョンとサブスクリプションキーが正しいか確認してください
- ブラウザーのコンソールログでエラーを確認してください

### 話者が検出されない
- マイクが正常に動作しているか確認してください
- 十分な音量で話しているか確認してください
- 背景ノイズが多い場合、認識精度が低下する可能性があります

## 📄 ライセンス

MIT License

## 🙏 謝辞

このアプリケーションは、Azure Speech Service の強力な機能を活用しています。

---

Made with ❤️ and Azure Speech Service
